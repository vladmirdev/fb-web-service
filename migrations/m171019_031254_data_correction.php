<?php

use yii\db\Migration;

class m171019_031254_data_correction extends Migration
{
    public function up()
    {
        $sql = <<<SQL
UPDATE `formulas` SET `pinyin` =  `name`;
UPDATE `formulas` SET `name` = CONCAT(UCASE(LEFT(`name`, 1)), SUBSTRING(`name`, 2));
UPDATE `formulas` SET name = LOWER(name);
UPDATE `formulas` SET name = CONCAT(UPPER(SUBSTR(name,1,1)),LOWER(SUBSTR(name,2)));
UPDATE `formulas` SET name = REPLACE(name,' a',' A');
UPDATE `formulas` SET name = REPLACE(name,' b',' B');
UPDATE `formulas` SET name = REPLACE(name,' c',' C');
UPDATE `formulas` SET name = REPLACE(name,' d',' D');
UPDATE `formulas` SET name = REPLACE(name,' e',' E');
UPDATE `formulas` SET name = REPLACE(name,' f',' F');
UPDATE `formulas` SET name = REPLACE(name,' g',' G');
UPDATE `formulas` SET name = REPLACE(name,' h',' H');
UPDATE `formulas` SET name = REPLACE(name,' i',' I');
UPDATE `formulas` SET name = REPLACE(name,' j',' J');
UPDATE `formulas` SET name = REPLACE(name,' k',' K');
UPDATE `formulas` SET name = REPLACE(name,' l',' L');
UPDATE `formulas` SET name = REPLACE(name,' m',' M');
UPDATE `formulas` SET name = REPLACE(name,' n',' N');
UPDATE `formulas` SET name = REPLACE(name,' o',' O');
UPDATE `formulas` SET name = REPLACE(name,' p',' P');
UPDATE `formulas` SET name = REPLACE(name,' q',' Q');
UPDATE `formulas` SET name = REPLACE(name,' r',' R');
UPDATE `formulas` SET name = REPLACE(name,' s',' S');
UPDATE `formulas` SET name = REPLACE(name,' t',' T');
UPDATE `formulas` SET name = REPLACE(name,' u',' U');
UPDATE `formulas` SET name = REPLACE(name,' v',' V');
UPDATE `formulas` SET name = REPLACE(name,' w',' W');
UPDATE `formulas` SET name = REPLACE(name,' x',' X');
UPDATE `formulas` SET name = REPLACE(name,' y',' Y');
UPDATE `formulas` SET name = REPLACE(name,' z',' Z');
SQL;
        $this->execute($sql);

        $sql = <<<SQL
TRUNCATE TABLE `herb_alternate`;

INSERT INTO `herb_alternate` (`id`, `herb_id`, `alternate_herb_id`, `is_deleted`, `created_by`, `created_time`, `modified_by`, `modified_time`) VALUES
(1,	8,	9,	0,	0,	'2017-10-12 14:50:17',	NULL,	'2017-10-12 15:00:32'),
(2,	21,	22,	0,	0,	'2017-10-12 14:50:19',	NULL,	'2017-10-12 15:00:32'),
(3,	21,	23,	0,	0,	'2017-10-12 14:50:21',	NULL,	'2017-10-12 15:00:32'),
(4,	28,	29,	0,	0,	'2017-10-12 14:50:23',	NULL,	'2017-10-12 15:00:32'),
(5,	37,	38,	0,	0,	'2017-10-12 14:50:26',	NULL,	'2017-10-12 15:00:32'),
(6,	48,	49,	0,	0,	'2017-10-12 14:50:28',	NULL,	'2017-10-12 15:00:32'),
(7,	50,	51,	0,	0,	'2017-10-12 14:50:30',	NULL,	'2017-10-12 15:00:32'),
(8,	56,	57,	0,	0,	'2017-10-12 14:50:31',	NULL,	'2017-10-12 15:00:32'),
(9,	58,	59,	0,	0,	'2017-10-12 14:50:34',	NULL,	'2017-10-12 15:00:32'),
(10,	65,	66,	0,	0,	'2017-10-12 14:50:35',	NULL,	'2017-10-12 15:00:32'),
(11,	68,	69,	0,	0,	'2017-10-12 14:50:36',	NULL,	'2017-10-12 15:00:32'),
(12,	71,	72,	0,	0,	'2017-10-12 14:50:37',	NULL,	'2017-10-12 15:00:32'),
(13,	81,	82,	0,	0,	'2017-10-12 14:50:40',	NULL,	'2017-10-12 15:00:32'),
(14,	81,	83,	0,	0,	'2017-10-12 14:50:40',	NULL,	'2017-10-12 15:00:32'),
(15,	92,	93,	0,	0,	'2017-10-12 14:50:42',	NULL,	'2017-10-12 15:00:32'),
(16,	96,	97,	0,	0,	'2017-10-12 14:50:48',	NULL,	'2017-10-12 15:00:32'),
(17,	96,	98,	0,	0,	'2017-10-12 14:50:49',	NULL,	'2017-10-12 15:00:32'),
(18,	107,	108,	0,	0,	'2017-10-12 14:50:52',	NULL,	'2017-10-12 15:00:32'),
(19,	113,	114,	0,	0,	'2017-10-12 14:50:53',	NULL,	'2017-10-12 15:00:32'),
(20,	117,	118,	0,	0,	'2017-10-12 14:50:54',	NULL,	'2017-10-12 15:00:32'),
(21,	122,	123,	0,	0,	'2017-10-12 14:50:56',	NULL,	'2017-10-12 15:00:32'),
(22,	122,	124,	0,	0,	'2017-10-12 14:50:57',	NULL,	'2017-10-12 15:00:32'),
(23,	127,	128,	0,	0,	'2017-10-12 14:51:01',	NULL,	'2017-10-12 15:00:32'),
(24,	127,	129,	0,	0,	'2017-10-12 14:51:02',	NULL,	'2017-10-12 15:00:32'),
(25,	130,	131,	0,	0,	'2017-10-12 14:51:04',	NULL,	'2017-10-12 15:00:32'),
(26,	130,	131,	0,	0,	'2017-10-12 14:51:05',	NULL,	'2017-10-12 15:00:32'),
(27,	133,	134,	0,	0,	'2017-10-12 14:51:07',	NULL,	'2017-10-12 15:00:32'),
(28,	146,	147,	0,	0,	'2017-10-12 14:51:09',	NULL,	'2017-10-12 15:00:32'),
(29,	150,	151,	0,	0,	'2017-10-12 14:51:12',	NULL,	'2017-10-12 15:00:32'),
(30,	150,	152,	0,	0,	'2017-10-12 14:51:13',	NULL,	'2017-10-12 15:00:32'),
(31,	157,	158,	0,	0,	'2017-10-12 14:51:14',	NULL,	'2017-10-12 15:00:32'),
(32,	160,	161,	0,	0,	'2017-10-12 14:51:18',	NULL,	'2017-10-12 15:00:32'),
(33,	164,	165,	0,	0,	'2017-10-12 14:51:21',	NULL,	'2017-10-12 15:00:32'),
(34,	168,	169,	0,	0,	'2017-10-12 14:51:23',	NULL,	'2017-10-12 15:00:32'),
(35,	176,	177,	0,	0,	'2017-10-12 14:51:24',	NULL,	'2017-10-12 15:00:32'),
(36,	181,	182,	0,	0,	'2017-10-12 14:51:30',	NULL,	'2017-10-12 15:00:32'),
(37,	184,	185,	0,	0,	'2017-10-12 14:51:33',	NULL,	'2017-10-12 15:00:32'),
(38,	189,	190,	0,	0,	'2017-10-12 14:51:35',	NULL,	'2017-10-12 15:00:32'),
(39,	191,	192,	0,	0,	'2017-10-12 14:51:36',	NULL,	'2017-10-12 15:00:32'),
(40,	193,	194,	0,	0,	'2017-10-12 14:51:37',	NULL,	'2017-10-12 15:00:32'),
(41,	196,	197,	0,	0,	'2017-10-12 14:51:39',	NULL,	'2017-10-12 15:00:32'),
(42,	208,	209,	0,	0,	'2017-10-12 14:51:42',	NULL,	'2017-10-12 15:00:32'),
(43,	212,	213,	0,	0,	'2017-10-12 14:51:43',	NULL,	'2017-10-12 15:00:32'),
(44,	247,	248,	0,	0,	'2017-10-12 14:51:48',	NULL,	'2017-10-12 15:00:32'),
(45,	252,	253,	0,	0,	'2017-10-12 14:51:49',	NULL,	'2017-10-12 15:00:32'),
(46,	254,	255,	0,	0,	'2017-10-12 14:52:10',	NULL,	'2017-10-12 15:00:32'),
(47,	259,	260,	0,	0,	'2017-10-12 14:52:12',	NULL,	'2017-10-12 15:00:32'),
(48,	273,	274,	0,	0,	'2017-10-12 14:52:15',	NULL,	'2017-10-12 15:00:32'),
(49,	276,	277,	0,	0,	'2017-10-12 14:52:18',	NULL,	'2017-10-12 15:00:32'),
(50,	279,	280,	0,	0,	'2017-10-12 14:52:19',	NULL,	'2017-10-12 15:00:32'),
(51,	292,	293,	0,	0,	'2017-10-12 14:52:20',	NULL,	'2017-10-12 15:00:32'),
(52,	297,	298,	0,	0,	'2017-10-12 14:52:23',	NULL,	'2017-10-12 15:00:32'),
(53,	312,	313,	0,	0,	'2017-10-12 14:52:26',	NULL,	'2017-10-12 15:00:32'),
(54,	320,	321,	0,	0,	'2017-10-12 14:52:29',	NULL,	'2017-10-12 15:00:32'),
(55,	323,	324,	0,	0,	'2017-10-12 14:52:48',	NULL,	'2017-10-12 15:00:32'),
(56,	349,	350,	0,	0,	'2017-10-12 14:52:52',	NULL,	'2017-10-12 15:00:32'),
(57,	349,	351,	0,	0,	'2017-10-12 14:52:53',	NULL,	'2017-10-12 15:00:32'),
(58,	349,	352,	0,	0,	'2017-10-12 14:52:53',	NULL,	'2017-10-12 15:00:32'),
(59,	361,	362,	0,	0,	'2017-10-12 14:52:58',	NULL,	'2017-10-12 15:00:32'),
(60,	368,	369,	0,	0,	'2017-10-12 14:53:13',	NULL,	'2017-10-12 15:00:32'),
(61,	368,	370,	0,	0,	'2017-10-12 14:53:14',	NULL,	'2017-10-12 15:00:32'),
(62,	377,	378,	0,	0,	'2017-10-12 14:53:17',	NULL,	'2017-10-12 15:00:32'),
(63,	397,	398,	0,	0,	'2017-10-12 14:53:20',	NULL,	'2017-10-12 15:00:32'),
(64,	412,	413,	0,	0,	'2017-10-12 14:53:22',	NULL,	'2017-10-12 15:00:32'),
(65,	422,	423,	0,	0,	'2017-10-12 14:53:23',	NULL,	'2017-10-12 15:00:32'),
(66,	425,	426,	0,	0,	'2017-10-12 14:53:24',	NULL,	'2017-10-12 15:00:32'),
(67,	434,	435,	0,	0,	'2017-10-12 14:53:25',	NULL,	'2017-10-12 15:00:32'),
(68,	436,	437,	0,	0,	'2017-10-12 14:53:27',	NULL,	'2017-10-12 15:00:32'),
(69,	443,	444,	0,	0,	'2017-10-12 14:53:29',	NULL,	'2017-10-12 15:00:32');
SQL;
        $this->execute($sql);


    }

    public function down()
    {
        echo "m171019_031254_data_correction cannot be reverted.\n";

        return false;
    }

    /*
    // Use safeUp/safeDown to run migration code within a transaction
    public function safeUp()
    {
    }

    public function safeDown()
    {
    }
    */
}
